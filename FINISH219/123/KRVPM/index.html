<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>192.168.001.123</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  font-family:system-ui,sans-serif;
  background:black url('/monitor0314/images/photo123-1.jpg') center/cover no-repeat;
  color:white;
  overflow:hidden;
}
.close-btn{
  position:absolute;
  top:6px;
  right:10px;
  font-size:18px;
  cursor:pointer;
  background:black;
  padding:4px 8px;
  border-radius:4px;
  z-index:5;
}
/* status */
.status-bar{
  display:flex;
  justify-content:space-between;
  padding:4px 10px;
  font-size:14px;
}

.weather-date{
  text-align:center;
  margin-top:20px;
  font-size:16px;
}

.main-icons{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:25px;
  margin-top:60px;
}

.main-icons img,.bottom-bar img{
  width:50px;
  height:50px;
  cursor:pointer;
}

.bottom-bar{
  position:fixed;
  bottom:0;
  width:100%;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
  background:rgba(0,0,0,.6);
}

/* modal */
.modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:999;
}

.modal{
  position:relative;
  width:90%;
  height:90%;
  background:black;
  border-radius:8px;
  overflow:hidden;
}

.modal.image-mode{
  background:black;
}

.modal-content{
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

.modal-content img{
  max-width:100%;
  max-height:100%;
  user-select:none;
  pointer-events:none;
}

/* text-mode for messages */
.modal-content.text-mode{
  display:block;
  align-items:unset;
  justify-content:unset;
  overflow-y:auto;
  padding:16px;
  font-size:14px;
  line-height:1.5;
}

.msg-item{
  padding:8px 0;
  border-bottom:1px solid rgba(255,255,255,.25);
  cursor:pointer;
  margin-bottom:16px; /* å¢åŠ æ ¼å­é–“è· */
}

.msg-line1{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  align-items:center;
}

.msg-line1 div:first-child{
  display: inline-block;
  width: 356px;          /* 8å€‹å­—å¤§ç´„å¯¬åº¦ */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.msg-line1 div:last-child{
  width: 132px;
  flex-shrink: 0;
  text-align: right;
  white-space: nowrap;
}




.msg-preview{
  font-size:14px; /* ç¨å¤§æ–‡å­— */
  line-height:1.6; /* å¢åŠ é–±è®€é–“è· */
  opacity:.8;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.msg-back{
  margin-bottom:12px;
  cursor:pointer;
  opacity:.8;
}

/* image index */
.image-index{
  width: auto;              
  max-width: 200px;         
  position: absolute;       
  bottom: 12px;            
  left: 50%;    
  transform: translateX(-50%);
  text-align: center;
  font-size:16px;
  background: rgba(0,0,0,0.5);
  padding: 4px 12px;
  border-radius:12px;
  z-index:10;
}

/* exit tab */
.exit-tab{
  position:fixed;
  right:-78px;
  top:50%;
  transform:translateY(-50%);
  width:110px;
  height:42px;
  background:#1fbf5b;
  color:black;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  cursor:pointer;
  transition:.25s;
  z-index:10;
  border-top-left-radius:21px;
  border-bottom-left-radius:21px;
}
.exit-tab.open{ right:-12px }
</style>
</head>

<body>

<div class="status-bar">
  <div id="time"></div>
  <div>ğŸª« 28%</div>
</div>

<div class="weather-date">
  <div>å¤©æ°£ï¼šæ™´å¤© ğŸŒ</div>
  <div>æº«åº¦ï¼š23Â°C</div>
  <div>æ¿•åº¦ï¼š15%</div>
  <div id="current-date"></div>
</div>

<div class="main-icons">
  <img src="/monitor0314/icons/map123.png" id="map">
  <img src="/monitor0314/icons/calculator123.png" id="calculator">
  <img src="/monitor0314/icons/photo123.png" id="photo">
  <img src="/monitor0314/icons/calendar123.png" id="calendar">
</div>

<div class="bottom-bar">
  <img src="/monitor0314/icons/phone123.png" id="phone">
  <img src="/monitor0314/icons/messege123.png" id="message">
  <img src="/monitor0314/icons/chrome123.png" id="google">
  <img src="/monitor0314/icons/camera123.png" id="camera">
</div>

<div class="exit-tab" id="exitTab">é€€å‡ºIP</div>

<div class="modal-overlay" id="modal">
  <div class="modal" id="modalBox">
    <div class="close-btn" id="close">âœ–</div>
    <div class="modal-content" id="modalContent"></div>
  </div>
  <div class="image-index" id="imgIndex"></div> <!-- æ”¾åœ¨ modalBox å¤–é¢ -->
</div>

  </div>
</div>

<script>
/* é è¼‰åœ–ç‰‡ */
const preloadImages = [
  '/monitor0314/images/photo123-1.jpg',
  '/monitor0314/images/photo123-2.jpg',
  '/monitor0314/images/photo123-3.jpg',
  '/monitor0314/images/map123-1.png',
  '/monitor0314/images/map123-2.png',
  '/monitor0314/images/map123-3.png',
  '/monitor0314/images/calendar123-1.jpg',
  '/monitor0314/images/calendar123-2.jpg',
  '/monitor0314/images/calendar123-3.jpg'
];
preloadImages.forEach(src=>{const img=new Image(); img.src=src;});

/* time/date */
const timeEl=document.getElementById('time');
const dateEl=document.getElementById('current-date');
setInterval(()=>{
  const d=new Date();
  timeEl.textContent=d.toTimeString().slice(0,5);
},1000);
dateEl.textContent=`${new Date().getFullYear()}/${new Date().getMonth()+1}/${new Date().getDate()}`;

/* modal base */
const modal=document.getElementById('modal');
const modalBox=document.getElementById('modalBox');
const modalContent=document.getElementById('modalContent');
const imgIndex=document.getElementById('imgIndex');
let imgs=[],idx=0,startX=0;

document.getElementById('close').onclick=()=>modal.style.display='none';

/* messages */
/* messages */
const messages=[
  {dir:'â†—',num:'+123153483',date:'1/26',full:'2026/01/26',text:'æˆ‘è¦è¨‚å…«æ¯å¥¶èŒ¶ï¼ŒåŠç³–å»å†°ï¼Œæ™šé»æœƒæœ‰åŠ©ç†éå»é ˜ã€‚'},
  {dir:'â†™',num:'+123586812',date:'2/20',full:'2026/02/20',text:'é‡Œå¤«æ–¯å…ˆç”Ÿï¼Œæ‚¨è¦çš„è³‡è¨Šå·²ç¶“å‚³åˆ°æ‚¨çš„ä¿¡ç®±ï¼Œè«‹æ³¨æ„æŸ¥æ”¶ã€‚'},
  {dir:'â†—',num:'+125378953',date:'3/06',full:'2026/03/06',text:'å¹«æˆ‘é»å¿™'}
];

/* ç”Ÿæˆç¬¬ä¸€å±¤é è¦½æ–‡å­—ï¼Œè¶…éç¬¬8å€‹å­—åŠ â€¦ */
messages.forEach(m=>{
  m.preview8 = m.text.length > 8 ? m.text.slice(0,15)+'â€¦' : m.text;
});

function openMessageList(){
  modalBox.classList.remove('image-mode');
  modalContent.classList.add('text-mode');
  imgIndex.style.display='none';
  modal.style.display='flex';

  modalContent.innerHTML = `
  <div class="msg-header" style="font-size:18px; font-weight:bold;">è¨Šæ¯</div>
  ${messages.map((m,i)=>`
    <div class="msg-item" onclick="openMessageDetail(${i})" style="margin-bottom:25px;">
        <div class="msg-line1">
          <div>${m.dir}${m.num}</div>
          <div>${m.date}</div>
        </div>
        <div class="msg-preview">${m.preview8}</div>
      </div>
    `).join('')}
  `;
}

window.openMessageDetail=function(i){
  const m=messages[i];
  modalBox.classList.remove('image-mode');
  modalContent.classList.add('text-mode');
  imgIndex.style.display='none';
  modal.style.display='flex';

  const status = m.dir==='â†—' ? 'å·²å¯„å‡º' : 'å·²è®€å–';

  modalContent.innerHTML = `
  <div class="msg-back" onclick="openMessageList()" style="font-size:18px; font-weight:bold;">â† è¨Šæ¯</div>
  <div style="margin-top:12px; font-size:16px; font-weight:bold;">${m.full}</div>
    <div>${m.num}ã€€${status}</div>
    <div style="margin-top:12px;">${m.text}</div>
  `;
};

/* icons */
document.getElementById('phone').onclick = ()=>{
  openText(`
    <div style="font-size:18px; font-weight:bold; margin-bottom:12px;">é€šè©±</div>
    <p>æš«ç„¡æ–°é€šè©±</p>
  `);
};
document.getElementById('camera').onclick=()=>openText('<p>ä½ ç„¡æ³•æ“ä½œé€™é …åŠŸèƒ½</p>');
document.getElementById('calculator').onclick=()=>openText('<p>ä½ ç„¡æ³•æ“ä½œé€™é …åŠŸèƒ½</p>');
document.getElementById('message').onclick=openMessageList;
document.getElementById('google').onclick=()=>location.href='https://www.google.com';

/* modal functions */
function openText(html){
  modalBox.classList.remove('image-mode');
  modalContent.classList.add('text-mode');
  imgIndex.style.display='none';
  modalContent.innerHTML=html;
  modal.style.display='flex';
}

function renderImage(){
  modalContent.innerHTML = `<img src="${imgs[idx]}">`;
  const rev = modalContent.dataset.reverse==='1';
  imgIndex.textContent = rev ? `${imgs.length-idx} / ${imgs.length}` : `${idx+1} / ${imgs.length}`;
}

function openViewer(list, reverse=false){
  imgs=[...list]; // reset
  idx=0;
  modalBox.classList.add('image-mode');
  modalContent.classList.remove('text-mode');
  imgIndex.style.display='block';
  modal.style.display='flex';
  modalContent.dataset.reverse = reverse ? '1':'0';
  renderImage();
}

/* swipe only for images */
modalContent.addEventListener('touchstart', e=>{
  if(!modalBox.classList.contains('image-mode')) return;
  startX=e.touches[0].clientX;
});
modalContent.addEventListener('touchend', e=>{
  if(!modalBox.classList.contains('image-mode')) return;
  const dx = e.changedTouches[0].clientX - startX;
  if(Math.abs(dx)>50){
    const rev = modalContent.dataset.reverse==='1';
    if(dx<0){ idx=rev?Math.max(idx-1,0):Math.min(idx+1,imgs.length-1);}
    else{ idx=rev?Math.min(idx+1,imgs.length-1):Math.max(idx-1,0);}
    renderImage();
  }
});
modalContent.addEventListener('mousedown', e=>{
  if(!modalBox.classList.contains('image-mode')) return;
  startX=e.clientX;
  modalContent.onmouseup = ev=>{
    const dx=ev.clientX-startX;
    if(Math.abs(dx)>50){
      const rev=modalContent.dataset.reverse==='1';
      if(dx<0){ idx=rev?Math.max(idx-1,0):Math.min(idx+1,imgs.length-1);}
      else{ idx=rev?Math.min(idx+1,imgs.length-1):Math.max(idx-1,0);}
      renderImage();
    }
    modalContent.onmouseup=null;
  };
});

/* icons click for viewers */
document.getElementById('map').onclick = ()=>openViewer([
  '/monitor0314/images/map123-1.png',
  '/monitor0314/images/map123-2.png',
  '/monitor0314/images/map123-3.png'
], true);

document.getElementById('calendar').onclick = ()=>openViewer([
  '/monitor0314/images/calendar123-1.jpg',
  '/monitor0314/images/calendar123-2.jpg',
  '/monitor0314/images/calendar123-3.jpg'
], true);

document.getElementById('photo').onclick = ()=>openViewer([
  '/monitor0314/images/photo123-1.jpg',
  '/monitor0314/images/photo123-2.jpg',
  '/monitor0314/images/photo123-3.jpg'
]);

/* exit tab */
const exitTab=document.getElementById('exitTab');
let armed=false;
exitTab.onclick=e=>{
  e.stopPropagation();
  if(!exitTab.classList.contains('open')){
    exitTab.classList.add('open');
    armed=true;
  }else if(armed){
    location.href='https://kk9655433-prog.github.io/monitor0314/FINISH219/';
  }
};
document.body.onclick=()=>{
  exitTab.classList.remove('open');
  armed=false;
};
</script>

</body>
</html>
